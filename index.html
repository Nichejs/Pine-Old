<html>
<head>
<title>Open RPG</title>
<style type="text/css">
	body{
		margin:0;
		padding: 0;
	}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(function(e) {
	// VARIABLES
		var ctx;
		var WIDTH;
		var HEIGHT;
		
		var canvasMinX;
		var canvasMaxX;
		
		var canvasMinY;
		var canvasMaxY;
		
		var rotation = 0; // Angulo de giro
		
		var ms = {x:0, y:0}; // Mouse speed
		var mp = {x:0, y:0}; // Mouse position
		
		var fps = 0, now, lastUpdate = (new Date)*1 - 1;
		var fpsFilter = 100;
		
		ctx = $('#bg')[0].getContext("2d");
		
		
		// Actualizamos las variables:
		WIDTH = $("#container").width();
	  	HEIGHT = $("#container").height();
		
		canvasMinX = $("#container").offset().left;
	  	canvasMaxX = canvasMinX + WIDTH;
		
		canvasMinY = $("#container").offset().top;
	  	canvasMaxY = canvasMinY + HEIGHT;
	  	
	  	$("#bg").attr('width',WIDTH);
		$("#bg").attr('height',HEIGHT);
		
		ctx.translate(0,HEIGHT/2);
	  	
		// Funciones importantes:
		function clear() {
			ctx.clearRect(0, 0-HEIGHT/2, WIDTH, HEIGHT);
		}
		
		function circle(x,y,rad,color){
			// Circulo
			ctx.fillStyle = color;
			ctx.beginPath();
			ctx.arc(x,y,rad,0,Math.PI*2,true);
			ctx.closePath();
			ctx.fill();
		}
		
		function fade() {
			ctx.fillStyle="rgba(0,0,0,0.01)";
			ctx.fillRect(0, 0, WIDTH, HEIGHT);
		}
		
		function resizeCanvas(e) {
			/*WIDTH = window.innerWidth;
			HEIGHT = window.innerHeight;
			
			$("#bg").attr('width',WIDTH);
			$("#bg").attr('height',HEIGHT);
			
			ctx.translate(0,HEIGHT/2);*/
		}
		
		function mouseMove(e) {
			ms.x = Math.max( Math.min( e.pageX - mp.x, 40 ), -40 );
			ms.y = Math.max( Math.min( e.pageY - mp.y, 40 ), -40 );
			
			mp.x = e.pageX - canvasMinX;
			mp.y = e.pageY - canvasMinY;
		}
		var points = 100;
		var t = 0;
		// Move 0,0 to the center of the screen
		function draw(e) {
			ctx.rect(0, 0-HEIGHT/2, WIDTH, HEIGHT);
			ctx.fillStyle = "rgba(50,255,50,1)";
			ctx.fill();
		}
		
		function frame(){
			clear();
			draw();
			// Now calculate FPS
			var thisFrameFPS = 1000 / ((now=new Date) - lastUpdate);
			fps += (thisFrameFPS - fps) / fpsFilter;
			lastUpdate = now * 1 - 1;
		}
		
		// Display fps
		setInterval(function(){ $('#fps').text('FPS: '+fps.toFixed(0)); }, 500); 
		
		// Actualizadores
		resizeCanvas();
		$(window).resize(resizeCanvas);
		$(document).mousemove(mouseMove);
		drawInterval = setInterval( frame, 1 );
		draw();
	});
</script>
</head>
<body>
	<h1>Open RPG</h1>
	<p>Esto es el archivo index.html</p>
	<div id="container" style="border:1px solid #ccc; width: 600px; height:500px; margin:0 auto;">
		<canvas id="bg"></canvas>
	</div>
</body>
</html>